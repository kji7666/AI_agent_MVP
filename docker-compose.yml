version: '3.8'

services:
  coc-game:
    build: .
    # 載入環境變數 (.env)
    env_file:
      - .env
    # 掛載目錄：讓你改了 Python Code 不用重包 Docker 就能生效
    volumes:
      - .:/app
    environment:
      # 這行指令會把模型存到專案的 data/hf_cache 資料夾，永久保存
      - HF_HOME=/app/data/hf_cache
      # 確保 Python 輸出不被緩衝 (讓你即時看到 log)
      - PYTHONUNBUFFERED=1
    # === 關鍵設定：開啟互動模式 ===
    stdin_open: true # 相當於 -i (Interactive)
    tty: true        # 使用 host 模式可以確保容器能順利連接外部 Internet